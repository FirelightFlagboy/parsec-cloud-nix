From c8e08e734c1d650a63f168b6627ba8de670844c0 Mon Sep 17 00:00:00 2001
From: Firelight Flagboy <firelight.flagboy@gmail.com>
Date: Mon, 15 Sep 2025 09:01:54 +0200
Subject: [PATCH 1/5] backport: chore(rust): Update web dependencies

No longer need to be patched, since they now ship it.
---
 Cargo.lock | 48 ++++++++++++++++++++++++++++--------------------
 Cargo.toml | 18 +++++-------------
 2 files changed, 33 insertions(+), 33 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index eaf9b4aee86..dceb585bf07 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -2050,8 +2050,9 @@ dependencies = [
 
 [[package]]
 name = "js-sys"
-version = "0.3.77"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.3.78"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "0c0b063578492ceec17683ef2f8c5e89121fbd0b172cbc280635ab7567db2738"
 dependencies = [
  "once_cell",
  "wasm-bindgen",
@@ -5103,19 +5104,22 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen"
-version = "0.2.100"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.2.101"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "7e14915cadd45b529bb8d1f343c4ed0ac1de926144b746e2710f9cd05df6603b"
 dependencies = [
  "cfg-if 1.0.0",
  "once_cell",
  "rustversion",
  "wasm-bindgen-macro",
+ "wasm-bindgen-shared",
 ]
 
 [[package]]
 name = "wasm-bindgen-backend"
-version = "0.2.100"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.2.101"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "e28d1ba982ca7923fd01448d5c30c6864d0a14109560296a162f80f305fb93bb"
 dependencies = [
  "bumpalo",
  "log",
@@ -5127,9 +5131,9 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-futures"
-version = "0.4.50"
+version = "0.4.51"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "555d470ec0bc3bb57890405e5d4322cc9ea83cebb085523ced7be4144dac1e61"
+checksum = "0ca85039a9b469b38336411d6d6ced91f3fc87109a2a27b0c197663f5144dffe"
 dependencies = [
  "cfg-if 1.0.0",
  "futures-core",
@@ -5141,8 +5145,9 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-macro"
-version = "0.2.100"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.2.101"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "7c3d463ae3eff775b0c45df9da45d68837702ac35af998361e2c84e7c5ec1b0d"
 dependencies = [
  "quote",
  "wasm-bindgen-macro-support",
@@ -5150,8 +5155,9 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-macro-support"
-version = "0.2.100"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.2.101"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "7bb4ce89b08211f923caf51d527662b75bdc9c9c7aab40f86dcb9fb85ac552aa"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -5162,17 +5168,18 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-shared"
-version = "0.2.100"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.2.101"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "f143854a3b13752c6950862c906306adb27c7e839f7414cec8fea35beab624c1"
 dependencies = [
  "unicode-ident",
 ]
 
 [[package]]
 name = "wasm-bindgen-test"
-version = "0.3.50"
+version = "0.3.51"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "66c8d5e33ca3b6d9fa3b4676d774c5778031d27a578c2b007f905acf816152c3"
+checksum = "80cc7f8a4114fdaa0c58383caf973fc126cf004eba25c9dc639bccd3880d55ad"
 dependencies = [
  "js-sys",
  "minicov",
@@ -5183,9 +5190,9 @@ dependencies = [
 
 [[package]]
 name = "wasm-bindgen-test-macro"
-version = "0.3.50"
+version = "0.3.51"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "17d5042cc5fa009658f9a7333ef24291b1291a25b6382dd68862a7f3b969f69b"
+checksum = "c5ada2ab788d46d4bda04c9d567702a79c8ced14f51f221646a16ed39d0e6a5d"
 dependencies = [
  "proc-macro2",
  "quote",
@@ -5207,8 +5214,9 @@ dependencies = [
 
 [[package]]
 name = "web-sys"
-version = "0.3.77"
-source = "git+https://github.com/FirelightFlagboy/wasm-bindgen.git?rev=9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e#9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e"
+version = "0.3.78"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "77e4b637749ff0d92b8fad63aa1f7cff3cbe125fd49c175cd6345e7272638b12"
 dependencies = [
  "js-sys",
  "wasm-bindgen",
diff --git a/Cargo.toml b/Cargo.toml
index fc1b491f742..f9449b46d68 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -148,7 +148,7 @@ hex-literal = { version = "0.4.1", default-features = false }
 indexed-db = { version = "0.5.0-alpha.1", default-features = false }
 itertools = { version = "0.12.1", default-features = false }
 jni = { version = "0.21.1", default-features = false }
-js-sys = { version = "0.3.70", default-features = false }
+js-sys = { version = "0.3.78", default-features = false }
 keyring = { version = "3.6.3", default-features = false }
 lazy_static = { version = "1.5.0", default-features = false }
 libc = { version = "0.2.175", default-features = false }
@@ -203,10 +203,10 @@ tokio = { version = "1.47.1", default-features = false }
 unicode-normalization = { version = "0.1.24", default-features = false }
 url = { version = "2.5.4", default-features = false }
 uuid = { version = "1.18.0", default-features = false }
-wasm-bindgen = { version = "0.2.97", default-features = false }
-wasm-bindgen-futures = { version = "0.4.47", default-features = false }
-wasm-bindgen-test = { version = "0.3.47", default-features = false, features = ["std"] }
-web-sys = { version = "0.3.77", default-features = false }
+wasm-bindgen = { version = "0.2.101", default-features = false }
+wasm-bindgen-futures = { version = "0.4.51", default-features = false }
+wasm-bindgen-test = { version = "0.3.51", default-features = false, features = ["std"] }
+web-sys = { version = "0.3.78", default-features = false }
 web-time = { version = "1.1.0", default-features = false }
 widestring = { version = "1.2.0", default-features = false }
 windows-sys = { version = "0.60.2", default-features = false }
@@ -223,14 +223,6 @@ default-features = false
 rev = "a414f88ca3edd3c278491a561bd38f4bf292d935"
 git = "https://github.com/jedisct1/libsodium-rs.git"
 
-[patch.crates-io]
-# Patch web-sys for `Blob.bytes`
-# FIXME: Remove me once https://github.com/rustwasm/wasm-bindgen/pull/4506 is merged and released
-web-sys = { git = "https://github.com/FirelightFlagboy/wasm-bindgen.git", rev = "9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e" }
-wasm-bindgen = { git = "https://github.com/FirelightFlagboy/wasm-bindgen.git", rev = "9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e" }
-js-sys = { git = "https://github.com/FirelightFlagboy/wasm-bindgen.git", rev = "9402ae3bd1eea6d4a8c0d6b62dd62efa4c536d6e" }
-# End patch web-sys for `Blob.bytes`
-
 [workspace.dependencies.criterion]
 default-features = false
 version = "0.5.1"

From 8c5bd37d1abe01940578904eee14aafde0ca7244 Mon Sep 17 00:00:00 2001
From: Emmanuel Leblond <emmanuel.leblond@gmail.com>
Date: Fri, 12 Sep 2025 14:38:26 +0200
Subject: [PATCH 2/5] backport: Bump libsodium-rs to v0.2.0

---
 Cargo.lock                                    | 83 ++++++++++++++-----
 Cargo.toml                                    |  8 +-
 libparsec/crates/crypto/src/sodium/private.rs | 14 +---
 3 files changed, 69 insertions(+), 36 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index dceb585bf07..bc6f44fafa9 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -782,9 +782,9 @@ checksum = "9b10589d1a5e400d61f9f38f12f884cfd080ff345de8f17efda36fe0e4a02aa8"
 
 [[package]]
 name = "ctor"
-version = "0.4.3"
+version = "0.5.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "ec09e802f5081de6157da9a75701d6c713d8dc3ba52571fd4bd25f412644e8a6"
+checksum = "67773048316103656a637612c4a62477603b777d91d9c62ff2290f9cde178fdb"
 dependencies = [
  "ctor-proc-macro",
  "dtor",
@@ -1039,18 +1039,18 @@ checksum = "1aaf95b3e5c8f23aa320147307562d361db0ae0d51242340f558153b4eb2439b"
 
 [[package]]
 name = "dtor"
-version = "0.0.6"
+version = "0.1.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "97cbdf2ad6846025e8e25df05171abfb30e3ababa12ee0a0e44b9bbe570633a8"
+checksum = "e58a0764cddb55ab28955347b45be00ade43d4d6f3ba4bf3dc354e4ec9432934"
 dependencies = [
  "dtor-proc-macro",
 ]
 
 [[package]]
 name = "dtor-proc-macro"
-version = "0.0.5"
+version = "0.0.6"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "7454e41ff9012c00d53cf7f475c5e3afa3b91b7c90568495495e8d9bf47a1055"
+checksum = "f678cf4a922c215c63e0de95eb1ff08a958a81d47e485cf9da1e27bf6305cfa5"
 
 [[package]]
 name = "dyn-clone"
@@ -1253,6 +1253,7 @@ source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "4a3d7db9596fecd151c5f638c0ee5d5bd487b6e0ea232e5dc96d5250f6f94b1d"
 dependencies = [
  "crc32fast",
+ "libz-rs-sys",
  "miniz_oxide 0.8.9",
 ]
 
@@ -2131,7 +2132,7 @@ source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "0c2a198fb6b0eada2a8df47933734e6d35d350665a33a3593d7164fa52c75c19"
 dependencies = [
  "cfg-if 1.0.0",
- "windows-targets 0.52.6",
+ "windows-targets 0.48.5",
 ]
 
 [[package]]
@@ -2594,8 +2595,9 @@ dependencies = [
 
 [[package]]
 name = "libsodium-rs"
-version = "0.1.1"
-source = "git+https://github.com/jedisct1/libsodium-rs.git?rev=a414f88ca3edd3c278491a561bd38f4bf292d935#a414f88ca3edd3c278491a561bd38f4bf292d935"
+version = "0.2.0"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "f4ae1792f42628ce969a3097a0fbfefc528a1b2160097bbb519a5a730e004348"
 dependencies = [
  "ct-codecs",
  "ctor",
@@ -2608,9 +2610,9 @@ dependencies = [
 
 [[package]]
 name = "libsodium-sys-stable"
-version = "1.22.3"
+version = "1.22.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "b023d38f2afdfe36f81e15a9d7232097701d7b107e3a93ba903083985e235239"
+checksum = "371900aef5f23af8d4164c4b2eec129613df06888d87f34c3e9aec9f205022d2"
 dependencies = [
  "cc",
  "libc",
@@ -2618,7 +2620,7 @@ dependencies = [
  "minisign-verify",
  "pkg-config",
  "tar",
- "ureq",
+ "ureq 3.1.2",
  "vcpkg",
  "zip",
 ]
@@ -2634,6 +2636,15 @@ dependencies = [
  "vcpkg",
 ]
 
+[[package]]
+name = "libz-rs-sys"
+version = "0.5.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "840db8cf39d9ec4dd794376f38acc40d0fc65eec2a8f484f7fd375b84602becd"
+dependencies = [
+ "zlib-rs",
+]
+
 [[package]]
 name = "linux-keyutils"
 version = "0.2.4"
@@ -4066,7 +4077,7 @@ dependencies = [
  "sentry-panic",
  "sentry-tracing",
  "tokio",
- "ureq",
+ "ureq 2.12.1",
 ]
 
 [[package]]
@@ -4910,7 +4921,7 @@ version = "1.6.3"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "97fee6b57c6a41524a810daee9286c02d7752c4253064d0b05472833a438f675"
 dependencies = [
- "cfg-if 1.0.0",
+ "cfg-if 0.1.10",
  "static_assertions",
 ]
 
@@ -4991,6 +5002,31 @@ dependencies = [
  "url",
 ]
 
+[[package]]
+name = "ureq"
+version = "3.1.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "99ba1025f18a4a3fc3e9b48c868e9beb4f24f4b4b1a325bada26bd4119f46537"
+dependencies = [
+ "base64",
+ "log",
+ "percent-encoding",
+ "ureq-proto",
+ "utf-8",
+]
+
+[[package]]
+name = "ureq-proto"
+version = "0.5.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "60b4531c118335662134346048ddb0e54cc86bd7e81866757873055f0e38f5d2"
+dependencies = [
+ "base64",
+ "http",
+ "httparse",
+ "log",
+]
+
 [[package]]
 name = "url"
 version = "2.5.4"
@@ -5003,6 +5039,12 @@ dependencies = [
  "serde",
 ]
 
+[[package]]
+name = "utf-8"
+version = "0.7.6"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "09cc8ee72d2a9becf2f2febe0205bbed8fc6615b7cb429ad062dc7b7ddd036a9"
+
 [[package]]
 name = "utf16_iter"
 version = "1.0.5"
@@ -5758,21 +5800,24 @@ dependencies = [
 
 [[package]]
 name = "zip"
-version = "2.4.2"
+version = "5.1.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "fabe6324e908f85a1c52063ce7aa26b68dcb7eb6dbc83a2d148403c9bc3eba50"
+checksum = "2f852905151ac8d4d06fdca66520a661c09730a74c6d4e2b0f27b436b382e532"
 dependencies = [
  "arbitrary",
  "crc32fast",
- "crossbeam-utils",
- "displaydoc",
  "flate2",
  "indexmap 2.2.5",
  "memchr",
- "thiserror 2.0.15",
  "zopfli",
 ]
 
+[[package]]
+name = "zlib-rs"
+version = "0.5.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "2f06ae92f42f5e5c42443fd094f245eb656abf56dd7cce9b8b263236565e00f2"
+
 [[package]]
 name = "zopfli"
 version = "0.8.2"
diff --git a/Cargo.toml b/Cargo.toml
index f9449b46d68..180a77045f7 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -152,6 +152,7 @@ js-sys = { version = "0.3.78", default-features = false }
 keyring = { version = "3.6.3", default-features = false }
 lazy_static = { version = "1.5.0", default-features = false }
 libc = { version = "0.2.175", default-features = false }
+libsodium-rs = { version = "0.2.0", default-features = false }
 # We use the version on which depends `libsodium-rs`
 libsodium-sys-stable = { version = "*", default-features = false }
 libsqlite3-sys = { version = "0.30.1", default-features = false }
@@ -216,13 +217,6 @@ x25519-dalek = { version = "2.0.1", default-features = false }
 zeroize = { version = "1.8.1", default-features = false }
 zstd = { version = "0.13.3", default-features = false }
 
-[workspace.dependencies.libsodium-rs]
-version = "0.1.1"
-default-features = false
-# Waiting for new release
-rev = "a414f88ca3edd3c278491a561bd38f4bf292d935"
-git = "https://github.com/jedisct1/libsodium-rs.git"
-
 [workspace.dependencies.criterion]
 default-features = false
 version = "0.5.1"
diff --git a/libparsec/crates/crypto/src/sodium/private.rs b/libparsec/crates/crypto/src/sodium/private.rs
index 7c0dd63e7d3..a316ea3193a 100644
--- a/libparsec/crates/crypto/src/sodium/private.rs
+++ b/libparsec/crates/crypto/src/sodium/private.rs
@@ -42,8 +42,8 @@ impl PrivateKey {
     }
 
     pub fn decrypt_from_self(&self, ciphered: &[u8]) -> Result<Vec<u8>, CryptoError> {
-        let pk = crypto_box::PublicKey::from_array(self.public_key().to_bytes());
-        let sk = crypto_box::SecretKey::from_array(self.to_bytes());
+        let pk = crypto_box::PublicKey::from_bytes_exact(self.public_key().to_bytes());
+        let sk = crypto_box::SecretKey::from_bytes_exact(self.to_bytes());
         open_sealed_box(ciphered, &pk, &sk).map_err(|_| CryptoError::Decryption)
     }
 
@@ -54,10 +54,7 @@ impl PrivateKey {
     }
 
     pub fn to_bytes(&self) -> [u8; Self::SIZE] {
-        self.0
-            .as_bytes()
-            .try_into()
-            .expect("Underlying bytes is of correct size")
+        self.0.as_bytes().to_owned()
     }
 }
 
@@ -94,10 +91,7 @@ impl PublicKey {
     }
 
     pub fn to_bytes(&self) -> [u8; Self::SIZE] {
-        self.0
-            .as_bytes()
-            .try_into()
-            .expect("Underlying bytes is of correct size")
+        self.0.as_bytes().to_owned()
     }
 }
 

From 14e8a049d8ac4af50760188e4a3ea5d466ddf026 Mon Sep 17 00:00:00 2001
From: Firelight Flagboy <firelight.flagboy@gmail.com>
Date: Mon, 1 Sep 2025 13:16:08 +0200
Subject: [PATCH 3/5] backport: fixup! ci(rust): Run `cargo-deny` check with
 all features

---
 .github/workflows/ci-rust.yml | 2 +-
 deny.toml                     | 3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/.github/workflows/ci-rust.yml b/.github/workflows/ci-rust.yml
index 0008e27b509..b457e708855 100644
--- a/.github/workflows/ci-rust.yml
+++ b/.github/workflows/ci-rust.yml
@@ -207,7 +207,7 @@ jobs:
           echo "::add-matcher::.github/custom-problem-matchers/cargo-deny.json"
           # cargo-deny outputs the report on stderr and it needs to be redirected to stdout for the problem matcher to work.
           # Need to run with `all-features` else it will not scan optional dependencies enabled by features
-          cargo deny --color=never check --hide-inclusion-graph --show-stats --all-features 2>&1
+          cargo deny --all-features --color=never check --hide-inclusion-graph --show-stats 2>&1
           echo "::remove-matcher owner=cargo-deny::"
         timeout-minutes: 2
 
diff --git a/deny.toml b/deny.toml
index 0ff2ec93dcd..e81ebd479ac 100644
--- a/deny.toml
+++ b/deny.toml
@@ -280,7 +280,8 @@ allow-git = ["https://github.com/FirelightFlagboy/wasm-bindgen.git"]
 
 [sources.allow-org]
 # 1 or more github.com organizations to allow git sources for
-github = ["Scille"]
+# cspell:words jedisct1
+github = ["Scille", "jedisct1"]
 # 1 or more gitlab.com organizations to allow git sources for
 gitlab = []
 # 1 or more bitbucket.org organizations to allow git sources for

From da449423ade2bcf5813a4405c578cb0e57bc7805 Mon Sep 17 00:00:00 2001
From: Firelight Flagboy <firelight.flagboy@gmail.com>
Date: Mon, 15 Sep 2025 08:58:38 +0200
Subject: [PATCH 4/5] backport: chore(rust): Update `fuser` to 0.16.0

---
 Cargo.lock                                                  | 4 ++--
 Cargo.toml                                                  | 2 +-
 libparsec/crates/platform_mountpoint/src/unix/filesystem.rs | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index bc6f44fafa9..d025fa8b3f0 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -1319,9 +1319,9 @@ dependencies = [
 
 [[package]]
 name = "fuser"
-version = "0.15.1"
+version = "0.16.0"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "53274f494609e77794b627b1a3cddfe45d675a6b2e9ba9c0fdc8d8eee2184369"
+checksum = "0bb29a3ae32279fe3e79a958fe01899f5fb23eadccee919cf88e145b54ed9367"
 dependencies = [
  "libc",
  "log",
diff --git a/Cargo.toml b/Cargo.toml
index 180a77045f7..8af46e2360e 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -138,7 +138,7 @@ event-listener = { version = "5.4.1", default-features = false }
 eventsource-stream = { version = "0.2.3", default-features = false }
 flume = { version = "0.11.1", default-features = false }
 fnmatch-regex = { version = "0.2.1", default-features = false }
-fuser = { version = "0.15.1", default-features = false }
+fuser = { version = "0.16.0", default-features = false }
 futures = { version = "0.3.31", default-features = false }
 generic-array = { version = "0.14.7", default-features = false }
 getrandom = { package = "getrandom", version = "0.2.15", default-features = false }
diff --git a/libparsec/crates/platform_mountpoint/src/unix/filesystem.rs b/libparsec/crates/platform_mountpoint/src/unix/filesystem.rs
index 7ee9f6afbaf..47704ef68bb 100644
--- a/libparsec/crates/platform_mountpoint/src/unix/filesystem.rs
+++ b/libparsec/crates/platform_mountpoint/src/unix/filesystem.rs
@@ -258,7 +258,7 @@ pub(crate) static LOOKUP_HOOK: Mutex<
 macro_rules! add_capabilities {
     ($config:expr, $capability:ident) => {
         $config
-            .add_capabilities(fuser::consts::$capability)
+            .add_capabilities(fuser::consts::$capability as u64)
             .expect(concat!("Capability available: ", stringify!($capability)));
     };
 

From 1360a8344a9488d8c57bc15c1ae1b66060cd66e1 Mon Sep 17 00:00:00 2001
From: Firelight Flagboy <firelight.flagboy@gmail.com>
Date: Wed, 17 Sep 2025 13:57:19 +0200
Subject: [PATCH 5/5] chore(rust): Update backtrace to `0.3.75`

This remove the unmaintained `adler` crate
---
 Cargo.lock | 41 +++++++++++++----------------------------
 1 file changed, 13 insertions(+), 28 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index d025fa8b3f0..6e8eadeef2d 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -4,19 +4,13 @@ version = 4
 
 [[package]]
 name = "addr2line"
-version = "0.21.0"
+version = "0.24.2"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "8a30b2e23b9e17a9f90641c7ab1549cd9b44f296d3ccbf309d2863cfe398a0cb"
+checksum = "dfbe277e56a376000877090da837660b4427aad530e3028d44e0bffe4f89a1c1"
 dependencies = [
  "gimli",
 ]
 
-[[package]]
-name = "adler"
-version = "1.0.2"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "f26201604c87b1e01bd3d98f8d5d9a8fcbb815e8cedb41ffccbeb4bf593a35fe"
-
 [[package]]
 name = "adler2"
 version = "2.0.1"
@@ -245,17 +239,17 @@ checksum = "d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa"
 
 [[package]]
 name = "backtrace"
-version = "0.3.69"
+version = "0.3.75"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "2089b7e3f35b9dd2d0ed921ead4f6d318c27680d4a5bd167b3ee120edb105837"
+checksum = "6806a6321ec58106fea15becdad98371e28d92ccbc7c8f1b3b6dd724fe8f1002"
 dependencies = [
  "addr2line",
- "cc",
  "cfg-if 1.0.0",
  "libc",
- "miniz_oxide 0.7.2",
+ "miniz_oxide",
  "object",
  "rustc-demangle",
+ "windows-targets 0.52.6",
 ]
 
 [[package]]
@@ -1254,7 +1248,7 @@ checksum = "4a3d7db9596fecd151c5f638c0ee5d5bd487b6e0ea232e5dc96d5250f6f94b1d"
 dependencies = [
  "crc32fast",
  "libz-rs-sys",
- "miniz_oxide 0.8.9",
+ "miniz_oxide",
 ]
 
 [[package]]
@@ -1487,9 +1481,9 @@ dependencies = [
 
 [[package]]
 name = "gimli"
-version = "0.28.1"
+version = "0.31.1"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "4271d37baee1b8c7e4b708028c57d816cf9d2434acb33a549475f78c181f6253"
+checksum = "07e28edb80900c19c28f1072f2e8aeca7fa06b23cd4169cefe1af5aa3260783f"
 
 [[package]]
 name = "glob"
@@ -2748,15 +2742,6 @@ version = "0.2.4"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "e856fdd13623a2f5f2f54676a4ee49502a96a80ef4a62bcedd23d52427c44d43"
 
-[[package]]
-name = "miniz_oxide"
-version = "0.7.2"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "9d811f3e15f28568be3407c8e7fdb6514c1cda3cb30683f15b6a1a1dc4ea14a7"
-dependencies = [
- "adler",
-]
-
 [[package]]
 name = "miniz_oxide"
 version = "0.8.9"
@@ -2964,9 +2949,9 @@ dependencies = [
 
 [[package]]
 name = "object"
-version = "0.32.2"
+version = "0.36.7"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "a6a622008b6e321afc04970976f62ee297fdbaa6f95318ca343e3eebb9648441"
+checksum = "62948e14d923ea95ea2c7c86c71013138b66525b86bdc08d2dcc262bdb497b87"
 dependencies = [
  "memchr",
 ]
@@ -3881,9 +3866,9 @@ dependencies = [
 
 [[package]]
 name = "rustc-demangle"
-version = "0.1.23"
+version = "0.1.26"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "d626bb9dae77e28219937af045c257c28bfd3f69333c512553507f5f9798cb76"
+checksum = "56f7d92ca342cea22a06f2121d944b4fd82af56988c270852495420f961d4ace"
 
 [[package]]
 name = "rustc_version"
